<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Web Animation Showcase</title>
        <!-- inject:css -->

        <link rel="stylesheet" href="/style/menu.css">

        <link rel="stylesheet" href="/style/webanim.css">

        <!-- endinject -->
    </head>

    <body>
        
        
        
        
        
        <!-- inject:js -->
        
        <script src="/components/Snap.svg/dist/snap.svg-min.js"></script>
        
        <script src="/src/scene/Scene.js"></script>
        
        <script src="/src/Anim.js"></script>
        
        <script src="/src/Effects.js"></script>
        
        <script src="/src/Stack.js"></script>
        
        <script src="/src/SvgHelper.js"></script>
        
        <script src="/src/TransformationMatrix.js"></script>
        
        <script src="/src/painting/IslandsPainting.js"></script>
        
        <script src="/src/painting/Memo.js"></script>
        
        <script src="/src/scene/BarScene.js"></script>
        
        <script src="/src/scene/CanonScene.js"></script>
        
        <script src="/src/scene/CharpenteScene.js"></script>
        
        <script src="/src/scene/MatrixScene.js"></script>
        
        <script src="/src/scene/PerpendiculaireScene.js"></script>
        
        <!-- endinject -->

        <script>
            let sceneObj = null;
            
            let scenes = {
                'islands' : {
                    classname : 'IslandsPainting'
                },
                'bar' : {
                    classname : 'BarScene'
                },
                'perpendiculaire' : {
                    classname : 'PerpendiculaireScene'
                },
                'charpente' : {
                    classname : 'CharpenteScene'
                },
                'canon' : {
                    classname : 'CanonScene'
                },
                'matrix' : {
                    classname : 'MatrixScene'
                }
            }

            function setupScene(key){
                //console.log('setup scene ' + key);
                let classname = scenes[key].classname;
                sceneObj = eval("new " + classname + "()");
                let promise = sceneObj.initialize();
                promise.then((node)=>{
                    let sceneElt = document.getElementById('scene_container'); 
                    sceneElt.innerHTML  = '';
                    sceneElt.appendChild(node);    
                    sceneObj.stage();
                });
            }


            function navigate(key, target){
                clearNav();
                target.classList.add("active");
                setupScene(key);
            }

            function clearNav(){
                let links = document.getElementsByClassName('topnav')[0].children;
                for (let link of links) {
                    link.classList.remove("active")
                };
            }

            document.addEventListener('DOMContentLoaded', async function() {
                let elt = document.getElementsByClassName('topnav')[0].lastElementChild.click();
            });        
        </script>




        <div class="topnav">
            <a href="#bar" onclick="navigate('bar', this)">Bar</a>
            <a href="#islands" onclick="navigate('islands', this)">Iles</a>
            <a href="#perpendiculaire" onclick="navigate('perpendiculaire', this)">Géométrie</a>
            <a href="#charpente" onclick="navigate('charpente', this)">Charpente</a>
            <a href="#matrix" onclick="navigate('matrix', this)">Matrix</a>
            <a href="#canon" onclick="navigate('canon', this)">Texte Anim</a>
        </div>

        <div id="scene_container">

        </div>



    </body>
</html>
